<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="LTR">
  <head>
    <title>Pure Data</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="icon" href="_templates/fm_resources/fl2.ico" type="image/x-icon" />
    <link rel="stylesheet" href="_templates/fm_resources/fm_book.css" type="text/css" />
   <link type="text/css" href="_templates/prettify/src/prettify.css" rel="Stylesheet" >
<script type="text/javascript" src="_templates/prettify/src/prettify.js"></script>



    <script type="text/javascript" src="_templates/jquery/js/jquery-1.6.1.min.js"></script>

    <script type="text/javascript" src="_templates/fm_resources/fm_book.js"></script>
</head>
<body onload="prettyPrint();">
<div id="home">
  <a href="http://archive.flossmanuals.net/pure-data/"><img src="_templates/fm_resources/top_read_back.gif" border="0" alt="" /></a>
</div>

<div id="pdf">
  <a href="../_booki/pure-data/pure-data.epub"><img src="_templates/fm_resources/epub.gif" border="0" alt="" /></a>
  <a href="../_booki/pure-data/pure-data.pdf"><img src="_templates/fm_resources/pdf.gif" border="0" alt="" /></a>
  <a href="../_all.html"><img src="_templates/fm_resources/print.gif" border="0" alt="" /></a>
</div>

<div id="index-book-title">
	Pure Data
</div>
<div id="main">
  <div class="navbar">
    <div class="arrow top left"><a href="generating-waveforms.html#"><img src="_templates/fm_resources/lefttext.png" style="height:20px !important;" alt="" /></a></div>
    <div class="arrow top right"><a href="generating-waveforms.html#"><img src="_templates/fm_resources/righttext.png" style="height:20px !important;" alt="" /></a></div>
<!--    <div id="edit-links">
      <a href='http://www.booki.cc/'>Edit this Book</a>
    </div>
-->
  </div>

  <div class="fm-content">
    <div id="main-content">
  <h1>Generating Waveforms</h1>

  <h2>Outline</h2>

  <p>This chapter will cover generating sawtooth, triangle and square waveforms from a combination of sine wave harmonics, graphing these waveforms to an array and playing this array back as an oscillator.</p>

  <h2>Introduction<br></h2>

  <p>Besides using the built-in oscillators such as [osc~] and [phasor~], or using audio mathematics on the output of [phasor~] to create new waveforms, it is possible to generate the waveforms of a saw, triangle or square wave out of a combination of sine waves. When written to an <strong>array</strong>, these waveforms can be played back as an oscillator.</p>

  <p>This method has a few advantages over using [phasor~] to create different waveforms. The first advantage is that the resulting waveforms will be <strong>bandlimited</strong>. This means the number of harmonics they produce will be limited, and will cause less <strong>aliasing</strong> noise. For more details on aliasing, see the <u>Antialiasing</u> chapter of this FLOSS Manual.</p>

  <p>The second advantage is that these waveforms much more closely resemble the kinds of waveforms generated by analog electronics. Real world analog waveforms do not have the completely sharp angles of their idealized, digital counterparts due to the "rippling" effect inherent in the <strong>resonance</strong> of their circuitry. One could subjectively say that these waveforms are more "warm" and "analog-sounding" than the ones produced by [phasor~].</p>

  <p>The basic principle we will use here comes from the Fourier theorem. This theorem states that any complex waveform can be broken down into a series of simpler sine waves which, when added back together, can reproduce that waveform. The more sine waves used to represent the complex wave, the more accurate the reproduction will be. While a full explanation of the math behind this is outside the scope of this manual, we will cover the use of this theorem to create three basic wave forms, the sawtooth, the triangle and the square.<br></p>

  <h2>Using Sinesum</h2>

  <p>In Pd, we can write waveforms to a table using an <strong>internal message</strong>. An internal message is a message box which, when clicked, sends the message inside to the Pd application itself. An example would be the messages we can use to turn audio processing on and off in Pd:</p>

  <p><img title="onoff" alt="onoff" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-onoff-en.png" height="111" width="219">&nbsp;</p>

  <p>So to create and load a table with a waveform, we must first create an <strong>array</strong> from the Put menu. Then we give it the name "waveform" in the properties:</p>

  <p><img title="create.waveform" alt="create.waveform" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-create-waveform-en.png" height="421" width="505"></p>

  <p>After that, we create a message, and type the following in it (using the Return key after the semicolon to start a new line):<br></p>
  <pre>
; waveform sinesum 2051 1
</pre>

  <p>The semicolon indicates that the message is an internal message, and "waveform" indicates that we are sending information to the array named "waveform". The word "sinesum" tells the array that we will be sending it a series of harmonics to graph. The number "2051" tells the array that we want to graph those harmonics out on 2051 units on the X range, so the array will be resized from 100 (its default size) to 2051. Finally, the number "1" indicates that we want to write a single sine wave with a peak amplitude of 1 to the array.</p>

  <p>When we click the message, we see a pure sine wave graphed to the array:</p>

  <p><img title="waves.1" alt="waves.1" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-waves-1-en.png" height="105" width="504"></p>

  <h2>Sawtooth Wave<br></h2>

  <p>The way that sinesum works is that you send it a list of the amplitudes of the harmonics you wish to graph. A sawtooth wave is the simplest, as it uses the formula 1/h (where "h" indicates the number of the harmonic) to compute the amplitudes. Therefore, the amplitude of the first harmonic is 1/1 = 1, the second is 1/2 = 0.5, the third is 1/3 = 0.33333, etc etc.</p>

  <p>Here is a message to compute a very rudimentary sawtooth wave using only four harmonics:</p>
  <pre>
; waveform1 sinesum 1 0.5 0.33 0.25 
</pre>

  <p>And here it is graphed:</p>

  <p><img title="waves.2" alt="waves.2" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-waves-2-en.png" height="147" width="495"></p>

  <p>Because the graph is the product of several sine waves being added up, the waveform can go outside the normal -1 to 1 bounds of an audio signal. The message:</p>
  <pre>
; waveform1 normalize 1
</pre>

  <p>will adjust the range of the signal to fit within the bounds of -1 and 1. Below, we have two examples of sawtooth waves, both normalized to the range of -1 to 1. As can be seen, the more harmonics used to calculate the waveform, the closer it gets to its idealized mathematical form:</p>

  <p><img title="waves.3" alt="waves.3" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-waves-3-en.png" height="231" width="504"></p>

  <h2>Playback of the Graphed Waveforms</h2>

  <p>To play back the waveforms we have graphed to the arrays, we use the [tabread4~] object. It takes an audio signal as its input, which reads along the X axis of the array and outputs as an audio signal the values that it finds along the Y axis.</p>

  <p>We can use [phasor~] to play the array as an oscillator when we scale its output, which is normally 0 to 1, to fit the whole length of the array. Thus, if our array is 2051 places long, then we can use an Audio Multiplication [*~] object to get an output of 0 to 2051. Increasing the frequency of the [phasor~] will increase the frequency at which the waveform in the array is played back from start to finish<br></p>

  <p><img title="waves.4_1" alt="waves.4_1" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-waves-4_1-en.png" height="441" width="444"></p>

  <p>The [tabread4~] object can take the name of the array it will read as a <strong>creation argument</strong>, or you can use a message such as the following to change the array it reads from:</p>
  <pre>
set waveform 2
</pre>

  <h2>Triangle Wave</h2>

  <p>A triangle wave can also be quite simply generated with only a few harmonics. The shape of a triangle wave is made using only the odd harmonics (1, 3, 5, 7, etc). Zeros are used for the amplitude of the even harmonics (2, 4, 6, 8, etc). Then 1 is divided by the square of each of those harmonics (i.e. 1/h<sup>2</sup>). Finally, the amplitude of every other harmonic is multiplied by -1 (i.e. the amplitudes of the third, seventh, ninth, etc harmonics). The triangle wave takes shape very quickly with only four harmonics, and as more harmonics are added, the points of the triangle become sharper.</p>

  <p><img title="waves.5" alt="waves.5" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-waves-5-en.png" height="227" width="503">&nbsp;</p>

  <h2>Square Wave</h2>

  <p>A square wave takes a few more added harmonics to get close to its ideal mathematical shape. This waveform is created also using only the odd-numbered harmonics (1, 3, 5, 9...), and zero is also used for the amplitude of the even harmonics (2, 4, 6, 8...). Then 1 is divided by the number of the harmonic to get its amplitude (i.e. 1/h). As illustrated below, a square wave made up of only four harmonics isn't very square, but when more harmonics are added its shape becomes very clear.<br></p>

  <p><img title="waves.6" alt="waves.6" src="_booki/pure-data/static/PureData-SimpleSynthesizer-AudioTutorials-waves-6-en.png" height="230" width="504"><br></p>

  <p>&nbsp;</p>

  <p><br></p>
</div>

<ul class="menu-goes-here">
  <li class="booki-section">INTRODUCTION</li>

  <li><a href="../introduction/index.html">INTRODUCTION</a></li>

  <li><a href="../introduction/graphical-programming.html">GRAPHICAL PROGRAMMING</a></li>

  <li><a href="../introduction/what-is-digital-audio.html">WHAT IS DIGITAL AUDIO?</a></li>

  <li class="booki-section">INSTALLING</li>

  <li><a href="../installing/osx.html">OSX</a></li>

  <li><a href="../installing/windows.html">WINDOWS</a></li>

  <li><a href="../installing/ubuntu.html">UBUNTU</a></li>

  <li><a href="../installing/debian.html">DEBIAN</a></li>

  <li class="booki-section">GETTING STARTED</li>

  <li><a href="../getting-started/configuring.html">CONFIGURING</a></li>

  <li><a href="../getting-started/advanced-configuration.html">ADVANCED CONFIGURATION</a></li>

  <li><a href="../getting-started/starting.html">STARTING</a></li>

  <li class="booki-section">THE INTERFACE</li>

  <li><a href="../the-interface/the-interface.html">THE INTERFACE</a></li>

  <li><a href="../the-interface/trouble-shooting.html">TROUBLE SHOOTING</a></li>

  <li class="booki-section">AUDIO TUTORIALS</li>

  <li><a href="simple-synth.html">SIMPLE SYNTH</a></li>

  <li><a href="oscillators.html">OSCILLATORS</a></li>

  <li><a href="frequency.html">FREQUENCY</a></li>

  <li><a href="additive-synthesis.html">ADDITIVE SYNTHESIS</a></li>

  <li><a href="amplitude-modulation.html">AMPLITUDE MODULATION</a></li>

  <li><a href="frequency-modulation.html">FREQUENCY MODULATION</a></li>

  <li><a href="square-waves.html">SQUARE WAVES</a></li>

  <li><a href="generating-waveforms.html">GENERATING WAVEFORMS</a></li>

  <li><a href="dc-offset.html">DC OFFSET</a></li>

  <li><a href="antialiasing.html">ANTIALIASING</a></li>

  <li><a href="filters.html">FILTERS</a></li>

  <li><a href="envelope-generator.html">ENVELOPE GENERATOR</a></li>

  <li><a href="amplifier.html">AMPLIFIER</a></li>

  <li><a href="controlling-the-synth.html">CONTROLLING THE SYNTH</a></li>

  <li><a href="step-sequencer.html">STEP SEQUENCER</a></li>

  <li><a href="4-stage-sequencer.html">4 STAGE SEQUENCER</a></li>

  <li class="booki-section">DATAFLOW TUTORIALS</li>

  <li><a href="../dataflow-tutorials/dataflow.html">DATAFLOW</a></li>

  <li><a href="../dataflow-tutorials/sequencer.html">SEQUENCER</a></li>

  <li><a href="../dataflow-tutorials/messages.html">MESSAGES</a></li>

  <li><a href="../dataflow-tutorials/math.html">MATH</a></li>

  <li><a href="../dataflow-tutorials/lists.html">LISTS</a></li>

  <li><a href="../dataflow-tutorials/order-of-operations.html">ORDER OF OPERATIONS</a></li>

  <li><a href="../dataflow-tutorials/wireless-connections.html">WIRELESS CONNECTIONS</a></li>

  <li><a href="../dataflow-tutorials/subpatches.html">SUBPATCHES</a></li>

  <li><a href="../dataflow-tutorials/abstractions.html">ABSTRACTIONS</a></li>

  <li><a href="../dataflow-tutorials/dollar-signs.html">DOLLAR SIGNS</a></li>

  <li><a href="../dataflow-tutorials/graph-on-parent.html">GRAPH ON PARENT</a></li>

  <li><a href="../dataflow-tutorials/arrays-graphs-tables.html">ARRAYS, GRAPHS, TABLES</a></li>

  <li class="booki-section">VIDEO (GEM) TUTORIALS</li>

  <li><a href="../video-gem-tutorials/introduction.html">INTRODUCTION</a></li>

  <li><a href="../video-gem-tutorials/basics.html">BASICS</a></li>

  <li><a href="../video-gem-tutorials/moving-images.html">MOVING IMAGES</a></li>

  <li><a href="../video-gem-tutorials/video-mixer.html">VIDEO MIXER</a></li>

  <li><a href="../video-gem-tutorials/effects.html">EFFECTS</a></li>

  <li><a href="../video-gem-tutorials/recording.html">RECORDING</a></li>

  <li><a href="../video-gem-tutorials/screens.html">SCREENS</a></li>

  <li><a href="../video-gem-tutorials/video-tracking.html">VIDEO TRACKING</a></li>

  <li class="booki-section">SENSORS</li>

  <li><a href="../sensors/game-controllers.html">GAME CONTROLLERS</a></li>

  <li><a href="../sensors/pduino.html">PDUINO</a></li>

  <li><a href="../sensors/installing-arduino-redhat.html">INSTALLING ARDUINO (REDHAT)</a></li>

  <li><a href="../sensors/installing-arduino-osx.html">INSTALLING ARDUINO (OSX)</a></li>

  <li><a href="../sensors/installing-pduino.html">INSTALLING PDUINO</a></li>

  <li><a href="../sensors/starting-pduino.html">STARTING PDUINO</a></li>

  <li><a href="../sensors/light-sensor.html">LIGHT SENSOR</a></li>

  <li class="booki-section">NETWORK DATA</li>

  <li><a href="../network-data/send-and-receive.html">SEND AND RECEIVE</a></li>

  <li><a href="../network-data/osc.html">OSC</a></li>

  <li class="booki-section">MIDI</li>

  <li><a href="../midi/using-midi.html">USING MIDI</a></li>

  <li class="booki-section">STREAMING</li>

  <li><a href="../streaming/audio-streaming.html">AUDIO STREAMING</a></li>

  <li><a href="../streaming/oggcast.html">OGGCAST</a></li>

  <li class="booki-section">LIST OF OBJECTS</li>

  <li><a href="../list-of-objects/introduction.html">INTRODUCTION</a></li>

  <li><a href="../list-of-objects/glue.html">GLUE</a></li>

  <li><a href="../list-of-objects/math.html">MATH</a></li>

  <li><a href="../list-of-objects/time.html">TIME</a></li>

  <li><a href="../list-of-objects/midi.html">MIDI</a></li>

  <li><a href="../list-of-objects/tables.html">TABLES</a></li>

  <li><a href="../list-of-objects/misc.html">MISC</a></li>

  <li><a href="../list-of-objects/audio-glue.html">AUDIO GLUE</a></li>

  <li><a href="../list-of-objects/audio-math.html">AUDIO MATH</a></li>

  <li><a href="../list-of-objects/oscillatrors-and-tables.html">OSCILLATRORS AND TABLES</a></li>

  <li><a href="../list-of-objects/audio-filters.html">AUDIO FILTERS</a></li>

  <li><a href="../list-of-objects/audio-delay.html">AUDIO DELAY</a></li>

  <li><a href="../list-of-objects/sub-window.html">SUB WINDOW</a></li>

  <li><a href="../list-of-objects/data-templates.html">DATA TEMPLATES</a></li>

  <li><a href="../list-of-objects/gem.html">GEM</a></li>

  <li><a href="../list-of-objects/pdp.html">PDP</a></li>

  <li><a href="../list-of-objects/physical-modelling.html">PHYSICAL MODELLING</a></li>

  <li><a href="../list-of-objects/obsolete.html">OBSOLETE</a></li>

  <li><a href="../list-of-objects/hosting-plugins.html">HOSTING PLUGINS</a></li>

  <li class="booki-section">APPENDICES</li>

  <li><a href="../appendices/glossary.html">GLOSSARY</a></li>

  <li><a href="../appendices/links.html">LINKS</a></li>

  <li><a href="../appendices/credits.html">CREDITS</a></li>
</ul>

  </div>
<br><br>
  <div class="navbar">
    <div class="arrow bottom left"><a href="generating-waveforms.html#"><img src="_templates/fm_resources/lefttext.png" style="height:20px !important;" alt="" /></a></div>
    <div class="arrow bottom right"><a href="generating-waveforms.html#"><img src="_templates/fm_resources/righttext.png" style="height:20px !important;" alt="" /></a></div>
  </div>
</div>

</body>
</html>

